(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){},33:function(e,t,a){e.exports=a(62)},38:function(e,t,a){},42:function(e,t,a){},48:function(e,t,a){},54:function(e,t,a){},58:function(e,t,a){},60:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),s=a.n(o),c=(a(38),a(2)),i=a.n(c),u=a(3),l=a(8),p=a(9),m=a(11),h=a(10),v=a(12),f=(a(42),a(63)),d=a(6),b=function(e){return{type:"LOGIN_USER",userObject:e}},g=function(e){return{type:"IS_LOADING",isLoading:e}},E=function(e){return{type:"HAS_ERRORED",message:e}},O=function(e){return{type:"FETCH_MOVIES_SUCCESS",movies:e}},w=function(e){return e.map(function(e){var t=e.title,a=e.backdrop_path,n=e.poster_path,r=e.overview,o=e.original_language,s=e.popularity;return{movie_id:e.id,title:t,backdrop_path:a,poster_path:n,overview:r,original_language:o,popularity:s,genre_ids:e.genre_ids,release_date:e.release_date,vote_average:e.vote_average}})},y="54bf3c231b54b82591554916467249d8",S=function(e){var t=e||1,a="https://api.themoviedb.org/3/discover/movie?api_key=".concat(y,"&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=true&page=").concat(t);return function(){var e=Object(u.a)(i.a.mark(function e(t){var n,r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(g(!0)),e.next=4,fetch(a);case 4:if((n=e.sent).ok){e.next=7;break}throw Error(n.statusText);case 7:return t(g(!1)),e.next=10,n.json();case 10:r=e.sent,o=w(r.results),t(O(o)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),t(E(e.t0.message));case 18:case"end":return e.stop()}},e,this,[[0,15]])}));return function(t){return e.apply(this,arguments)}}()},j=(a(48),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).incrementPage=Object(u.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.t1={pageNumber:e.state.pageNumber=e.state.pageNumber+1},t.next=4,e.nextPage();case 4:t.t2=t.sent,t.t0.setState.call(t.t0,t.t1,t.t2);case 6:case"end":return t.stop()}},t,this)})),e.decrementPage=Object(u.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.state.pageNumber>1)){t.next=7;break}return t.t0=e,t.t1={pageNumber:e.state.pageNumber=e.state.pageNumber-1},t.next=5,e.nextPage();case 5:t.t2=t.sent,t.t0.setState.call(t.t0,t.t1,t.t2);case 7:case"end":return t.stop()}},t,this)})),e.nextPage=function(){e.props.fetchMovies(e.state.pageNumber)},e.navToHomePage=function(){e.props.fetchMovies()},e.state={pageNumber:1},e}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("h4",null,this.props.user.name?"Welcome Back ".concat(this.props.user.name,"!"):null),r.a.createElement("button",{className:"nav-btn",onClick:this.decrementPage},r.a.createElement("i",{className:"fas fa-angle-left"})," Previous Page"),r.a.createElement(f.a,{to:"/favorites"},r.a.createElement("button",null,"My Favorites")),r.a.createElement(f.a,{to:"/",onClick:this.navToHomePage},r.a.createElement("h1",{className:"logo"},"Movie ",r.a.createElement("i",{className:"fas fa-film"})," Tracker")),this.props.user.name?r.a.createElement(f.a,{to:"/"},r.a.createElement("button",{onClick:this.props.logout},"Sign Out")):r.a.createElement(f.a,{to:"/login"},r.a.createElement("button",null,"Sign In")),r.a.createElement("button",{className:"nav-btn",onClick:this.incrementPage},"Next Page ",r.a.createElement("i",{className:"fas fa-angle-right"})))}}]),t}(n.Component)),x=Object(d.b)(function(e){return{user:e.user}},function(e){return{logout:function(){return e({type:"LOGOUT_USER"})},fetchMovies:function(t){return e(S(t))}}})(j),k=a(29),N=a(53),_=(a(54),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).toggleFavorite=function(){var e=a.props,t=e.movie,n=e.user;e.favorites.find(function(e){return e.movie_id===t.movie_id})?a.props.deleteFavoriteFromStore(t,n.id):a.props.postFavorite(t,n.id)},a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.favorites.find(function(t){return t.movie_id===e.props.movie.movie_id})?"favorite-movie favorite-btn":"favorite-btn",a="https://image.tmdb.org/t/p/w500/".concat(this.props.movie.poster_path);return r.a.createElement("div",{className:"movie-card"},this.props.user.name?r.a.createElement("button",{className:t,onClick:this.toggleFavorite},"Favorite"):r.a.createElement(N.a,{to:"/login"},r.a.createElement("button",{className:t},"Favorite")),r.a.createElement("article",{className:"card-text"},r.a.createElement("h1",{className:"movie-title"},this.props.movie.title),r.a.createElement("p",null," ",this.props.movie.overview," ")),r.a.createElement("article",{className:"poster"},r.a.createElement("img",{src:a,alt:this.props.movie.title})))}}]),t}(n.Component)),C=Object(d.b)(function(e){return{user:e.user,favorites:e.favorites}},function(e){return{postFavorite:function(t,a){return e(function(e,t){return function(){var a=Object(u.a)(i.a.mark(function a(n){var r;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("http://localhost:3000/api/users/favorites/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(k.a)({},e,{user_id:t}))});case 3:if((r=a.sent).ok){a.next=6;break}throw Error(r.statusText);case 6:n({type:"ADD_FAVORITE",favorite:e}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n(E(a.t0.message));case 12:case"end":return a.stop()}},a,this,[[0,9]])}));return function(e){return a.apply(this,arguments)}}()}(t,a))},deleteFavoriteFromStore:function(t,a){return e(function(e,t){var a="http://localhost:3000/api/users/".concat(t,"/favorites/").concat(e.movie_id);return function(){var t=Object(u.a)(i.a.mark(function t(n){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(a,{method:"DELETE"});case 3:if((r=t.sent).ok){t.next=6;break}throw Error(r.statusText);case 6:n({type:"REMOVE_FAVORITE",favorite:e}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(E(t.t0.message));case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()}(t,a))}}})(_),T=(a(25),a(14)),R=(a(58),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(T.a)({},n,r))},e.handleSubmit=function(){var t=Object(u.a)(i.a.mark(function t(a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.props.searchMovies(e.state.search),e.resetState();case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.resetState=function(){e.setState({search:""})},e.state={search:""},e}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"search-bar-div"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",placeholder:"Search the Database by any keyword!",name:"search",value:this.state.search,className:"search-input",onChange:this.handleChange}),r.a.createElement("button",{className:"search-btn"},"Search!")))}}]),t}(n.Component)),M=Object(d.b)(null,function(e){return{searchMovies:function(t){return e(function(e){var t=function(e){return e.replace(" ","%20")}(e),a="https://api.themoviedb.org/3/search/movie?api_key=".concat(y,"&language=en-US&query=").concat(t);return function(){var e=Object(u.a)(i.a.mark(function e(t){var n,r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(g(!0)),e.next=4,fetch(a);case 4:if((n=e.sent).ok){e.next=7;break}throw Error(n.statusText);case 7:return t(g(!1)),e.next=10,n.json();case 10:r=e.sent,o=w(r.results),t({type:"SEARCH_MOVIES_SUCCESS",movies:o}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),t(E(e.t0.message));case 18:case"end":return e.stop()}},e,this,[[0,15]])}));return function(t){return e.apply(this,arguments)}}()}(t))}}})(R),U=Object(d.b)(function(e){return{movies:e.movies,favorites:e.favorites,isLoading:e.isLoading,error:e.error}})(function(e){var t,a=(t="/favorites"===e.match.path?e.favorites:e.movies).map(function(e){return r.a.createElement(C,{movie:e,key:e.movie_id})});return e.isLoading?r.a.createElement("div",{className:"loading"},"LOADING..."):r.a.createElement("div",null,r.a.createElement(M,null),r.a.createElement("div",{className:0===t.length?"hidden":"movie-container"},a),r.a.createElement("h1",{className:0===t.length&&"/favorites"===e.match.path?"no-movies movie-container":"hidden"},"You have no favorited movies silly!"),r.a.createElement("h1",{className:0===t.length&&"/"===e.match.path?"no-movies movie-container":"hidden"},"No movies matched your search query."))}),F=(a(60),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).displayNewUserForm=function(){a.resetState(),a.setState({newUser:!0})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(T.a)({},n,r))},a.handleNewUserSubmit=function(){var e=Object(u.a)(i.a.mark(function e(t){var n,r,o,s,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state,r=n.name,o=n.password,s=n.email,c={name:r,email:s,password:o},e.next=5,a.props.createUser(c);case 5:return e.next=7,a.handleServerResponse();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleLoginSubmit=function(){var e=Object(u.a)(i.a.mark(function e(t){var n,r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state.email.toLowerCase(),r=a.state.password,o={password:r,email:n},e.next=6,a.props.loginUser(o);case 6:return e.next=8,a.handleServerResponse();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleServerResponse=function(){a.props.error?a.setState({errorMessage:!0}):(a.props.fetchFavorites(a.props.user.id),a.resetState(),a.props.history.push("/"))},a.resetState=function(){a.setState({email:"",password:"",verifiedPassword:"",name:""})},a.state={name:"",email:"",password:"",newUser:!1,errorMessage:!1},a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.name;return this.state.newUser?r.a.createElement("section",{className:"login-container"},r.a.createElement("h2",null,"Get ready to become a professional TRACKER!"),r.a.createElement("div",{className:this.state.errorMessage?"show-error":"hide-error"},"E-Mail already exists"),r.a.createElement("form",{onSubmit:this.handleNewUserSubmit,className:"login-form"},r.a.createElement("input",{type:"text",placeholder:"Name",value:n,name:"name",onChange:this.handleChange,required:!0}),r.a.createElement("input",{type:"email",placeholder:"E-Mail",value:t,name:"email",onChange:this.handleChange,required:!0}),r.a.createElement("input",{type:"password",placeholder:"Password",value:a,name:"password",onChange:this.handleChange,required:!0}),r.a.createElement("button",{className:"login-submit-btn"},"Submit"))):r.a.createElement("section",{className:"login-container"},r.a.createElement("h2",null,"Welcome back!"),r.a.createElement("div",{className:this.state.errorMessage?"show-error":"hide-error"},"E-Mail and Password do not match"),r.a.createElement("form",{onSubmit:this.handleLoginSubmit,className:"login-form"},r.a.createElement("input",{type:"email",placeholder:"E-Mail",value:t,name:"email",onChange:this.handleChange,required:!0}),r.a.createElement("input",{type:"password",placeholder:"Password",value:a,name:"password",onChange:this.handleChange,required:!0}),r.a.createElement("button",{className:"login-submit-btn"},"Submit")),r.a.createElement("div",{className:"signup-prompt"},r.a.createElement("label",null,"Or are you new to Movie Tracker?"),r.a.createElement("button",{onClick:this.displayNewUserForm},"Sign Up!")))}}]),t}(n.Component)),A=Object(d.b)(function(e){return{user:e.user,error:e.error}},function(e){return{loginUser:function(t){return e(function(e){return function(){var t=Object(u.a)(i.a.mark(function t(a){var n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(g(!0)),t.next=4,fetch("http://localhost:3000/api/users/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:if((n=t.sent).ok){t.next=7;break}throw Error(n.statusText);case 7:return a(g(!1)),t.next=10,n.json();case 10:r=t.sent,a(b(r.data)),a(E("")),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),a(E(t.t0.message));case 18:case"end":return t.stop()}},t,this,[[0,15]])}));return function(e){return t.apply(this,arguments)}}()}(t))},createUser:function(t){return e(function(e){return function(){var t=Object(u.a)(i.a.mark(function t(a){var n,r,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(g(!0)),t.next=4,fetch("http://localhost:3000/api/users/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:if((n=t.sent).ok){t.next=7;break}throw Error(n.statusText);case 7:return a(g(!1)),t.next=10,n.json();case 10:r=t.sent,o={id:r.id,email:e.email,password:e.password,name:e.name},a(b(o)),a(E("")),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),a(E(t.t0.message));case 19:case"end":return t.stop()}},t,this,[[0,16]])}));return function(e){return t.apply(this,arguments)}}()}(t))},fetchFavorites:function(t){return e(function(e){var t="http://localhost:3000/api/users/".concat(e,"/favorites");return function(){var e=Object(u.a)(i.a.mark(function e(a){var n,r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(g(!0)),e.next=4,fetch(t);case 4:if((n=e.sent).ok){e.next=7;break}throw Error(n.statusText);case 7:return a(g(!1)),e.next=10,n.json();case 10:r=e.sent,o=r.data,a({type:"ADD_FAVORITES",favorites:o}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),a(E(e.t0.message));case 18:case"end":return e.stop()}},e,this,[[0,15]])}));return function(t){return e.apply(this,arguments)}}()}(t))}}})(F),D=a(66),L=a(51),P=a(65),I=function(){return r.a.createElement("h1",{className:"no-movies movie-container"},"The page you requested cannot be found. Please check your address and try again.")},V=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.fetchMovies();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(x,null),r.a.createElement(D.a,null,r.a.createElement(L.a,{exact:!0,path:"/",component:U}),r.a.createElement(L.a,{path:"/login",component:A}),r.a.createElement(L.a,{path:"/favorites",component:U}),r.a.createElement(L.a,{component:I})))}}]),t}(n.Component),G=Object(P.a)(Object(d.b)(function(e){return{isLoading:e.isLoading,movies:e.movies,error:e.error}},function(e){return{fetchMovies:function(){return e(S())}}})(V));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=a(64),H=a(13),J=a(18),W=Object(H.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return t.userObject;case"LOGOUT_USER":return{};default:return e}},movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MOVIES_SUCCESS":case"SEARCH_MOVIES_SUCCESS":return t.movies;default:return e}},favorites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FAVORITE":return[].concat(Object(J.a)(e),[t.favorite]);case"ADD_FAVORITES":return[].concat(Object(J.a)(e),Object(J.a)(t.favorites));case"REMOVE_FAVORITE":return e.filter(function(e){return e.movie_id!==t.favorite.movie_id});case"LOGOUT_USER":return[];default:return e}},isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_LOADING":return t.isLoading;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HAS_ERRORED":return t.message;default:return e}}}),B=a(31),K=a(32),Y=Object(H.createStore)(W,Object(B.composeWithDevTools)(Object(H.applyMiddleware)(K.a))),$=r.a.createElement(d.a,{store:Y},r.a.createElement(q.a,null,r.a.createElement(G,null)));s.a.render($,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,2,1]]]);
//# sourceMappingURL=main.0c13a5e9.chunk.js.map